<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Items - StockedUp</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="search-items-page">
    <div class="container">
        <aside class="sidebar">
            <div class="user-info">
              <h2>Hello,<br />{{ session.username if session.username else 'User' }}</h2>
            </div>
            <a href="{{ url_for('view_inventory') }}"><button>View Inventory</button></a>
            <a href="{{ url_for('add_item_form') }}"><button>Add Item</button></a>
            <a href="{{ url_for('view_inventory') }}"><button title="Select 'Edit' in table">Edit Item</button></a>
            <!-- This page is active -->
            <a href="{{ url_for('search_items_form') }}"><button class="active">Search Item</button></a>
             <!-- *** Manage Links *** -->
            <a href="{{ url_for('manage_categories') }}"><button>Manage Categories</button></a>
            <a href="{{ url_for('manage_locations') }}"><button>Manage Locations</button></a>
            <!-- ************************** -->
            <a href="{{ url_for('logout_action') }}"><button class="signout">Sign Out</button></a>
        </aside>

        <main class="main-content">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}<div class="flashes">{% for category, message in messages %}
                 <div style="padding: 10px; margin-bottom: 10px; border: 1px solid; border-radius: 4px; color: #000; background-color: {% if category == 'danger' %}#f8d7da{% elif category == 'success' %}#d4edda{% else %}#cfe2ff{% endif %}; border-color: {% if category == 'danger' %}#f5c6cb{% elif category == 'success' %}#c3e6cb{% else %}#b6d4fe{% endif %};">{{ message }}</div>
              {% endfor %}</div>{% endif %}
            {% endwith %}

            <header class="header"> <h1>Search Inventory</h1> </header>
            <div class="content-box">
                <form method="GET" action="{{ url_for('view_inventory') }}">
                    <label for="search_term">Search Term:</label><br />
                    <input type="text" id="search_term" name="search_term" value="{{ request.args.get('search_term', '') }}"><br /><br />
                    <label for="category_filter">Category:</label><br />
                    <select id="category_filter" name="category_filter">
                        <option value="">--All Categories--</option>
                        {% for category in categories %}
                          <option value="{{ category.CategoryID }}" {% if request.args.get('category_filter') == category.CategoryID|string %}selected{% endif %}> {{ category.CategoryName }} </option>
                        {% endfor %}
                    </select><br /><br />
                    <label for="location_filter">Location:</label><br />
                    <select id="location_filter" name="location_filter">
                        <option value="">--All Locations--</option>
                        {% for location in locations %}
                          <option value="{{ location.LocationID }}" {% if request.args.get('location_filter') == location.LocationID|string %}selected{% endif %}> {{ location.LocationName }} </option>
                        {% endfor %}
                    </select><br /><br />
                    <button class="form-button" type="submit">Search</button>
                    <a href="{{ url_for('view_inventory') }}" style="margin-left: 10px;">Clear Filters</a>
                </form>
            </div>
        </main>
    </div>
</body>
</html>